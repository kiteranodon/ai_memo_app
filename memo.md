# メモアプリ開発 つまづき・注意点まとめ

## 1. モデル・マイグレーション・シーダーの自動生成
- `artisan make:model Memo -m -s` でモデル・マイグレーション・シーダーを一括生成できる。
- 生成直後は中身が空なので、要件に合わせてカラムやダミーデータを追加する必要がある。

## 2. マイグレーションのカラム設計
- memosテーブルのカラムはルールに従い、`title`(string), `body`(text), `user_id`(unsignedBigInteger, 外部キー)を追加。
- 外部キー制約（`onDelete('cascade')`）も忘れずに。

## 3. シーダーのサンプルデータ
- サンプルデータはルールの内容を反映。
- `user_id`は1固定で投入。
- 複数行テキストや絵文字なども含めてテストデータを用意。

## 4. DatabaseSeederの構文エラー
- `$this->call()` を `run()` メソッドの外に書くと構文エラーになる。
- 正しくは `run()` メソッドの中で呼び出す必要がある。

```php
public function run(): void
{
    // ...
    $this->call([
        MemoSeeder::class,
    ]);
}
```

## 5. マイグレーション・シーディングの実行
- `sail artisan migrate:fresh --seed` でテーブル初期化＋サンプルデータ投入が一括でできる。
- usersテーブルのダミーユーザーもSeederで作成しておくと、外部キー制約エラーを防げる。

---

### 今後の注意
- SeederやFactoryの編集後は、必ずマイグレーション・シーディングを再実行して反映を確認する。
- テーブル設計やSeederの内容は、ルールや仕様書と常に整合性を取ること。

